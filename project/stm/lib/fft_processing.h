// fft_processing.h
// Simplified FFT processing (no CMSIS-DSP dependency)

#ifndef FFT_PROCESSING_H
#define FFT_PROCESSING_H

#include <stdint.h>

///////////////////////////////////////////////////////////////////////////////
// Definitions
///////////////////////////////////////////////////////////////////////////////

// FFT size - must be power of 2
#define FFT_SIZE        256  // Reduced from 512 for simpler/faster computation
#define NUM_FREQUENCIES 5

// Sampling rate in Hz
#define SAMPLE_RATE     1000  // 1 kHz for better low-frequency resolution (3.9 Hz per bin)

///////////////////////////////////////////////////////////////////////////////
// Data structures
///////////////////////////////////////////////////////////////////////////////

typedef struct {
    float frequency;    // Frequency in Hz
    float magnitude;    // Magnitude of frequency component
} FrequencyPeak;

///////////////////////////////////////////////////////////////////////////////
// Function prototypes
///////////////////////////////////////////////////////////////////////////////

void initFFT(void);
void processFFT(uint16_t* adc_buffer, FrequencyPeak* peaks);

#endif
