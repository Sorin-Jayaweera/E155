---
title: "Lab 2"
description: "Testing the blog"
author: "Sorin Jayaweera"
date: "8/27/2025"
categories:
  - reflection
  - labreport
draft: false
---
 
---
title: "Lab 1 - E155 Startup"
description: "Testing an MCU and FPGA PCB with a 7 segment display"
author: "Sorin Jayaweera"
date: "8/27/2025"
categories:
  - reflection
  - labreport
draft: false
---


## Introduction

## Design and Testing Methodology

## Technical Documentatoin

### Block Diagram

### Schematic
![](/images/lab2/schematic.png)

The output 7 segment control pins are fed to the inputs of both 7 segment displays. The power for each display is controlled by a PNP transistor, which connects the weak enable signal from the FPGA to a 3.3v source.


### Testing

Two simulations were used to verify the behavior of this system. The first checked that the sum of the two binary numbers was properly computed, and the second tested the switching functionality between two displays with the 7 segment output.

The following displays holding one display constant while changing the inputs for the other, and we see the display code updating on alternating inputs following the enable for that display. More tests are not screenshot,due to the sheer number (and zooming in to see the binary numbers as validatoin).
![](/images/lab2/testbench_segs)

The following shows that the sum output from the top module is indeed the sum of the two inputs, for every combination of inputs.
![](/images/lab2/testbench_sum)

The frequency of the clock alternating between segment 0 and 1 had to be determined and verified in situ, due to the nature of human eye to discerne which frequency was applicable. 


### Physical Design Calculations
There are several sensitive components on this PCB.

The FPGA pins can drive at most $\pm$ 8 mA of current through IO pins, at 2.9 volts (3.3v - 0.4 according to the datasheet). The 7 segment display can handle a maximum of 20 mA of current before burnout. The transistor has a 10x amplification from input current to output current - so to protect the displays that the transistors are driving, current at the base should be restricted to 2 mA. 

 To restrict current going to the PNP transistors, a 1500 k $\Ohm$ resistor was used. ($2.9V/(0.02 mA = 1450 \Ohm$).

The LEDs have a forward voltage of 2.2V and a maximum current of 20 mA, which gives a minimum of 50 $\Ohm$ resistor between the LEDs and ground to restrict current flow, as $(3.2V - 2.2V)/(20mA) = 50 \Ohm$. A 200 $\Ohm$ resistor was used.


## Results and Discussion

### Testbench Simulation

## Conclusion

## AI overview
